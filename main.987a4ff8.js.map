{"version":3,"sources":["scripts/main.js"],"names":["headers","document","querySelector","tbody","colIndex","sortingTable","index","nameColumn","directSorting","sortTable","children","sort","first","second","a","innerText","b","localeCompare","toNormalNumber","reverse","append","string","res","Number","includes","slice","split","join","isActiveClass","arr","forEach","row","classList","contains","remove","addEventListener","e","target","cellIndex","parentElement","add","insertAdjacentHTML","form","normalizeValueForm","key","value","toLocaleString","preventDefault","newData","FormData","valuesObj","Object","fromEntries","entries","tr","createElement","validForm","pushNotification","reset","maxAge","minAge","minSalary","maxSalary","replace","length","titleNotification","type","description","divNotification","h1Notification","textNotification","body","setTimeout","prevValue","innerHTML","input","querySelectorAll","cloneNode","focus","enter","blur","name"],"mappings":"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","file":"main.987a4ff8.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\r\n\r\nconst headers = document.querySelector('thead');\r\nconst tbody = document.querySelector('tbody');\r\nlet colIndex = -1;\r\n\r\nheaders.addEventListener('click', (e) => {\r\n  const target = e.target;\r\n  const index = target.cellIndex;\r\n\r\n  sortingTable(index, target.innerText, colIndex === index);\r\n\r\n  colIndex = (colIndex === index) ? -1 : index;\r\n});\r\n\r\nfunction sortingTable(index, nameColumn, directSorting) {\r\n  const sortTable = [...tbody.children];\r\n\r\n  sortTable.sort((first, second) => {\r\n    const a = first.children[index].innerText;\r\n    const b = second.children[index].innerText;\r\n\r\n    switch (nameColumn) {\r\n      case 'Name':\r\n      case 'Position':\r\n      case 'Office':\r\n        return a.localeCompare(b);\r\n\r\n      case 'Age':\r\n      case 'Salary':\r\n        return toNormalNumber(a) - toNormalNumber(b);\r\n    }\r\n  });\r\n\r\n  if (directSorting) {\r\n    sortTable.reverse();\r\n  }\r\n\r\n  tbody.append(...sortTable);\r\n}\r\n\r\nfunction toNormalNumber(string) {\r\n  let res = '';\r\n\r\n  string.includes('$')\r\n    ? res = string.slice(1).split(',').join('')\r\n    : res = string;\r\n\r\n  return Number(res);\r\n};\r\n\r\ntbody.addEventListener('click', (e) => {\r\n  const target = e.target;\r\n\r\n  isActiveClass([...tbody.children]);\r\n  target.parentElement.classList.add('active');\r\n});\r\n\r\nfunction isActiveClass(arr) {\r\n  arr.forEach(row =>\r\n    row.classList.contains('active') ? row.classList.remove('active') : 1);\r\n};\r\n\r\ndocument.querySelector('body').insertAdjacentHTML('beforeend', `\r\n  <form class='new-employee-form'>\r\n    <label>\r\n      Name:\r\n      <input name='name' type='text' data-qa='name'>\r\n    </label>\r\n    <label>\r\n      Position:\r\n      <input name='position' type='text' data-qa='position'>\r\n    </label>\r\n    <label>\r\n      Office:\r\n      <select name='office' data-qa='office'>\r\n        <option>Tokyo</option>\r\n        <option>Singapore</option>\r\n        <option>London</option>\r\n        <option>New York</option>\r\n        <option>Edinburgh</option>\r\n        <option>San Francisco</option>\r\n      </select>\r\n    </label>\r\n    <label>\r\n      Age:\r\n      <input name='age' type='number' data-qa='age'>\r\n    </label>\r\n    <label>\r\n      Salary:\r\n      <input name='salary' type='number' data-qa='salary'>\r\n    </label>\r\n    <button type='submit'>\r\n      Save to table\r\n    </button>\r\n  </form>\r\n`);\r\n\r\nconst form = document.querySelector('.new-employee-form');\r\n\r\nform.addEventListener('submit', (e) => {\r\n  e.preventDefault();\r\n\r\n  const newData = new FormData(form);\r\n  const valuesObj = Object.fromEntries(newData.entries());\r\n  const tr = document.createElement('tr');\r\n\r\n  for (const key in valuesObj) {\r\n    if (!validForm(key, valuesObj[key])) {\r\n      return;\r\n    }\r\n\r\n    tr.insertAdjacentHTML(\r\n      'beforeend',\r\n      `<td>${normalizeValueForm(key, valuesObj[key])}</td>`\r\n    );\r\n  }\r\n\r\n  tbody.append(tr);\r\n  pushNotification('Success!', 'success', 'New employee successfully added');\r\n  form.reset();\r\n});\r\n\r\nfunction normalizeValueForm(key, value) {\r\n  return key === 'salary'\r\n    ? `$${Number(value).toLocaleString('en-US')}`\r\n    : value;\r\n}\r\n\r\nconst maxAge = 90;\r\nconst minAge = 18;\r\nconst minSalary = 1000;\r\nconst maxSalary = 1000000;\r\n\r\nfunction validForm(key, value) {\r\n  if (!value.replace(/ /g, '')) {\r\n    pushNotification('Error', 'error', 'Fill in all fields');\r\n\r\n    return false;\r\n  }\r\n\r\n  if (value.includes('  ')) {\r\n    pushNotification('Error', 'error',\r\n      'Field should not contains multiple  spaces');\r\n\r\n    return false;\r\n  }\r\n\r\n  if (key === 'name' && value.length < 4) {\r\n    pushNotification('Error', 'error',\r\n      'Name should contain at least 4 lettters');\r\n\r\n    return false;\r\n  }\r\n\r\n  if (key === 'age' && (+value > maxAge || +value < minAge)) {\r\n    pushNotification('Error', 'error',\r\n      'Age must be at least 18 and not more 90');\r\n\r\n    return false;\r\n  }\r\n\r\n  if (key === 'salary' && (+value > maxSalary || +value < minSalary)) {\r\n    pushNotification('Error', 'error',\r\n      'Salary must be at least $1,000 and not more $1,000,000');\r\n\r\n    return false;\r\n  }\r\n\r\n  return true;\r\n}\r\n\r\nfunction pushNotification(titleNotification, type, description) {\r\n  const divNotification = document.createElement('div');\r\n  const h1Notification = document.createElement('h1');\r\n  const textNotification = document.createElement('p');\r\n\r\n  document.body.append(divNotification);\r\n  divNotification.append(h1Notification);\r\n  divNotification.append(textNotification);\r\n  h1Notification.innerText = titleNotification;\r\n  textNotification.innerText = description;\r\n  divNotification.classList.add(type, 'notification');\r\n\r\n  setTimeout(() => divNotification.remove(), 5000);\r\n};\r\n\r\ntbody.addEventListener('dblclick', (e) => {\r\n  const target = e.target;\r\n  const index = target.cellIndex;\r\n  const prevValue = target.innerHTML;\r\n  const input = form.querySelectorAll('[name]')[index].cloneNode(true);\r\n\r\n  target.innerHTML = '';\r\n  input.classList.add('cell-input');\r\n  input.value = prevValue;\r\n  target.append(input);\r\n  input.focus();\r\n\r\n  input.addEventListener('keypress', enter => {\r\n    if (enter.key === 'Enter') {\r\n      input.blur();\r\n    }\r\n  });\r\n\r\n  input.addEventListener('blur', () => {\r\n    if (!validForm(input.name, input.value)) {\r\n      target.innerHTML = prevValue;\r\n\r\n      return;\r\n    }\r\n\r\n    target.innerHTML = normalizeValueForm(input.name, input.value);\r\n  });\r\n});\r\n"]}